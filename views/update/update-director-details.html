{% extends "layout.html" %}

{% set title = "Update the director's details" %}

{% block pageTitle %}
  {% include "includes/page-title.html" %}
{% endblock %}

{% block backLink %}
  {% include "includes/back-link.html" %}
{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds-from-desktop">
      <form action="" method="post"> 
          <span class="govuk-caption-l gem-c-title__context">
            {{companyName}}
          </span>
          <h2 class="govuk-heading-l">View and update the director's details</h2>

          <p class="govuk-hint">If you need to tell us about more than one update, and they happened on different dates, you must submit them separately.</p>
          {{ govukInsetText({
            text: "Any updates made to a director's details are pending until submitted and accepted."
          }) }}

          {% set nationality = nationality1 %}
          {% if nationality2 %}
            {% set nationality = nationality + "<br>" + nationality2 %}
          {% endif %}
          {% if nationality3 %}
            {% set nationality = nationality + "<br>" + nationality3 %}
          {% endif %}

          {% set name = firstName + " " + lastName %}
          {% if directorTitle %}
            {% set name = directorTitle + " " + name %}
          {% endif %}

          <p class="govuk-summary-list__key govuk-heading-m">Director details</p>
          {{ govukSummaryList({
            rows: [
              {
                key: {
                  text: "Name"
                },
                value: {
                  text: name
                },
                actions: {
                  items: [
                    {
                      href: nameLink,
                      text: "Update",
                      visuallyHiddenText: "Name",
                      attributes: {
                        "data-event-id": "update-name-change-link"
                      }
                    }
                  ]
                }
              },
              {
                key: {
                  text: "Nationality"
                },
                value: {
                  html: nationality
                },
                actions: {
                  items: [
                    {
                      href: nationalityLink,
                      text: "Update",
                      visuallyHiddenText: "nationality",
                      attributes: {
                        "data-event-id": "update-nationality-change-link"
                      }
                    }
                  ]
                }
              },
              {
                key: {
                  text: "Occupation"
                },
                value: {
                  text: occupation
                },
                actions: {
                  items: [
                    {
                      href: occupationLink,
                      text: "Update",
                      visuallyHiddenText: "occupation",
                      attributes: {
                        "data-event-id": "update-occupation-change-link"
                      }
                    }
                  ]
                }
              }
            ]
          }) }} 
          {% set officerFiling = officerFiling %}
          {% set isUpdate = isUpdate %}
          {% include "includes/check-your-answer/address-details.html" %}
          {% if updatedData %}
            <div class="govuk-button-group">
              {{ govukButton({
                attributes: {
                  id: "submit",
                  "data-event-id": "update-continue-button"
                },
                text: "Continue"
              }) }}
              <a class="govuk-link" href="{{cancelLink}}" data-event-id="update-cancel-link">Cancel</a>
            </div>
          {% else %}
            <button id="backToActiveDirectorsButton" name="back_to_active_directors" class="govuk-button govuk-button--secondary govuk-!-margin-right-2" data-module="govuk-button" value="no-change">
              Go back to current directors
            </button>
          {% endif %}
      </form>
    </div>
  </div>
{% endblock %}
